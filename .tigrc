set refresh-mode = periodic
set refresh-interval = 3
set vertical-split = no
set split-view-height = 80%
set ignore-space = at-eol
set ignore-case = true
set diff-highlight = true
set focus-child = no
set send-child-enter = no

######
#key
######
bind main V !@git revert %(commit)
bind main <Ctrl-r> !#git reset --soft %(commit)
bind main ! !@git reset --hard %(commit)
bind main <Ctrl-p> !@git pull --rebase
bind main R !git rebase -i %(commit)
bind main m :enter
bind main T !@git tag %(prompt) %(commit)

bind diff R !@git rebase -i %(commit)
bind diff n :next
bind diff p :previous

bind status m :enter
bind status P !git push
bind status <Ctrl-a> !@git add -A
bind status C !@git commit -m %(prompt)
bind status A !@git commit --amend --no-edit
bind status <Ctrl-!> !@?rm %(file)
bind status R !@?git restore --source=%(commit) -- %(file)

bind stage n :next
bind stage p :previous

bind refs n !@?git checkout -b %(prompt) %(branch)
bind refs N !@git checkout -b feature/%(prompt) %(branch)
bind refs D !@?git branch -D %(branch)
bind refs m !@git merge %(branch)
bind refs r !@git rebase %(branch)
bind refs c !@git checkout %(branch)

bind stash s !@git stash save %(prompt)

bind generic Y @sh -c "echo '%(commit)' | pbcopy"
bind stage   Y @sh -c "echo '%(file)' | pbcopy"
bind status  Y @sh -c "echo '%(file)' | pbcopy"
bind tree    Y @sh -c "echo '%(file)' | pbcopy"
bind blob    Y @sh -c "echo '%(file)' | pbcopy"
bind generic <Ctrl-g> refresh

# move
bind main G none
bind generic g move-first-line
bind generic G move-last-line
bind generic J move-page-down
bind generic K move-page-up
bind generic ; view-main

bind main    ;      @gh browse -- commit/%(commit)
bind blame   ;      @gh browse -- commit/%(commit)
bind diff    ;      @gh browse -- commit/%(commit)
bind tree    ;      @gh browse -- %(branch)/%(file)
bind blob    ;      @gh browse -- %(branch)/%(file)
bind grep    ;      @gh browse -- %(branch)/%(file)
bind tree    <Esc>; @gh browse -- "%(prompt Enter branch name: )"/%(file)
bind blob    <Esc>; @gh browse -- "%(prompt Enter branch name: )"/%(file)
bind grep    <Esc>; @gh browse -- "%(prompt Enter branch name: )"/%(file)
bind main    w      @gh browse -- compare/%(branch)?expand=1
bind diff    w      @gh browse -- compare/%(branch)?expand=1
bind refs    w      @gh browse -- compare/%(branch)?expand=1

######
#display
######
set main-view = id date author commit-title:graph=yes,refs=yes
set mouse = yes
